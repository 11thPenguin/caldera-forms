var caldera_forms_check_conditions,caldera_forms_init_conditions;!function(e){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var r=this.length>>>0,a=Number(arguments[1])||0;for(a=0>a?Math.ceil(a):Math.floor(a),0>a&&(a+=r);r>a;a++)if(a in this&&this[a]===e)return a;return-1}),cf_debounce=function(e,r,a){var t;return function(){var o=this,i=arguments,n=function(){t=null,a||e.apply(o,i)},l=a&&!t;clearTimeout(t),t=setTimeout(n,r),l&&e.apply(o,i)}},caldera_forms_check_conditions=function(r){if("undefined"!=typeof caldera_conditionals&&"undefined"!=typeof caldera_conditionals[r]){var a=e("#"+r);for(var t in caldera_conditionals[r]){var o=jQuery("#conditional_"+t);if(o.length){var i=caldera_conditionals[r][t].type,n=caldera_conditionals[r][t].group,l=[];for(var d in n){var c={},s=n[d];for(var f in s){var u=a.find('[data-field="'+s[f].field+'"]'),h=[],g="function"==typeof s[f].value?s[f].value():s[f].value;if("undefined"!=typeof s[f].selectors)for(var p in s[f].selectors){var m=new RegExp(p,"g");g=g.replace(m,e(s[f].selectors[p]).val())}if(c[f]=!1,u.is(":radio,:checkbox")?u=u.filter(":checked"):u.is("div")&&(u=jQuery("<input>").val(u.html())),u.length)for(var v=0;v<u.length;v++)h.push(u[v].value);else h.push(s[f].field);switch(s[f].compare){case"is":h.length&&h.indexOf(g.toString())>=0&&(c[f]=!0);break;case"isnot":h.length&&h.indexOf(g)<0&&(c[f]=!0);break;case">":case"greater":c[f]=parseFloat(h.reduce(function(e,r){return e+r}))>parseFloat(g);break;case"<":case"smaller":c[f]=parseFloat(h.reduce(function(e,r){return e+r}))<parseFloat(g);break;case"startswith":for(var v=0;v<h.length;v++)h[v].toLowerCase().substr(0,g.toLowerCase().length)===g.toLowerCase()&&(c[f]=!0);break;case"endswith":for(var v=0;v<h.length;v++)h[v].toLowerCase().substr(h[v].toLowerCase().length-g.toLowerCase().length)===g.toLowerCase()&&(c[f]=!0);break;case"contains":for(var v=0;v<h.length;v++)h[v].toLowerCase().indexOf(g)>=0&&(c[f]=!0)}}istrue=!0;for(var _ in c)if(c[_]===!1){istrue=!1;break}l.push(istrue)}var y,b=jQuery("#conditional-"+t+"-tmpl").html(),w=jQuery("#conditional_"+t),k=jQuery('[data-field="'+t+'"]');l.length&&l.indexOf(!0)>=0?"show"===i?y="show":"hide"===i?y="hide":"disable"===i&&(y="disable"):y="show"===i?"hide":"disable"===i?"enable":"show","show"===y?w.html().length||(w.html(b).trigger("cf.add"),jQuery(document).trigger("cf.add")):"hide"===y?w.html().length&&(k.val("").empty().prop("checked",!1),w.empty().trigger("cf.remove"),jQuery(document).trigger("cf.remove")):"enable"===y?w.html().length?k.prop("disabled",!1):(w.html(b).trigger("cf.add"),jQuery(document).trigger("cf.add").trigger("cf.enable")):"disable"===y&&(w.html().length?k.prop("disabled","disabled"):(w.html(b).trigger("cf.remove"),jQuery(document).trigger("cf.remove").trigger("cf.disable"),jQuery('[data-field="'+t+'"]').prop("disabled","disabled")))}}}},caldera_forms_init_conditions=function(){jQuery(".caldera_forms_form").on("change keyup","[data-field]",cf_debounce(function(r){var a=e(this).closest(".caldera_forms_form").prop("id");caldera_forms_check_conditions(a)},10))},"undefined"!=typeof caldera_conditionals&&caldera_forms_init_conditions()}(jQuery);